<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic Weather App</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Background Video -->
  <video id="bg-video" class="bg-video" autoplay loop muted playsinline>
  <source id="video-source" src="images\cloudy video.mp4" type="video/mp4">
</video>
  <div class="overlay"></div>

  <div class="container">

    <div class="search-box">
      <input type="text" id="city-input" placeholder="Enter City Name">
      <button id="search-btn">Search</button>
    </div>

    <div class="weather">
      <h1 class="temp">--Â°C</h1>
      <h2 class="city">City</h2>
      <h3 class="country">Country</h3>
      <p class="weather-type">Weather Type</p>
    </div>

    <div class="details">
      <div>
        <p class="humidity-value">--%</p>
        <p>Humidity</p>
      </div>

      <div>
        <p class="wind-speed">-- km/h</p>
        <p>Wind Speed</p>
      </div>
    </div>

  </div>

<script>

const apikey = "c34c10d3722450316b64a8cbc4b15a65";

function getWeatherType(temp) {
  if (temp < 0) return "Freezing â„";
  else if (temp <= 10) return "Very Cold ðŸ¥¶";
  else if (temp <= 20) return "Cool ðŸŒ¬";
  else if (temp <= 30) return "Warm ðŸ™‚";
  else if (temp <= 35) return "Hot â˜€";
  else if (temp <= 40) return "Very Hot ðŸ”¥";
  else return "Extreme Heat ðŸ¥µ";
}

/* ðŸ”¥ Change Background Based on Temperature */
function changeBackground(temp) {

  const video = document.getElementById("bg-video");
  const source = document.getElementById("video-source");

  if (temp < 10) {
    source.src = "images/cold.mp4";
  } 
  else if (temp <= 20) {
    source.src = "images/cloudy -windy.mp4";
  } 
  else if (temp <= 30) {
    source.src = "images/warm.mp4";
  } 
  else if (temp <= 40) {
    source.src = "images/hot.mp4";
  } 
  else {
    source.src = "images/extreme.mp4";
  }

  video.load();
}
function getCountryName(code) {
  const regionNames = new Intl.DisplayNames(['en'], { type: 'region' });
  return regionNames.of(code);
}

async function checkWeather() {

  const city = document.getElementById("city-input").value.trim();

  if (!city) {
    alert("Please enter a city name.");
    return;
  }

  try {

    const response = await fetch(
      `https://api.openweathermap.org/data/2.5/weather?units=metric&q=${city}&appid=${apikey}`
    );

    if (!response.ok) {
      alert("City not found!");
      return;
    }

    const data = await response.json();

    const temp = Math.round(data.main.temp);
    const countryCode = data.sys.country;

    document.querySelector(".temp").innerHTML = temp + "Â°C";
    document.querySelector(".city").innerHTML = data.name;
    document.querySelector(".country").innerHTML = getCountryName(countryCode);
    document.querySelector(".weather-type").innerHTML = getWeatherType(temp);
    document.querySelector(".humidity-value").innerHTML = data.main.humidity + "%";
    document.querySelector(".wind-speed").innerHTML = data.wind.speed + " km/h";

    /* ðŸ”¥ Call Background Change */
    changeBackground(temp);

  } catch (error) {
    alert("Something went wrong!");
  }
}

document.getElementById("search-btn").addEventListener("click", checkWeather);

document.getElementById("city-input").addEventListener("keypress", function(e) {
  if (e.key === "Enter") {
    checkWeather();
  }
});

</script>

</body>
</html>